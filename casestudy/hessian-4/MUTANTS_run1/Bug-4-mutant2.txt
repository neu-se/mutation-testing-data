

  binary.test.js
    ✓ should read "foo" binary
    ✓ should write "foo"
    1) should read and write empty binary
    ✓ should write and read as java impl (669ms)
    v2.0
      ✓ should read zero length binary data
      ✓ should read short datas
      ✓ should read max length short datas
      ✓ should read long binary
      ✓ should write short binary
      ✓ should write and read as java impl (665ms)
      ✓ should read java hessian 1.0 bin format (353ms)

  boolean.test.js
    ✓ should read true and false
    ✓ should write true and false
    v2.0
      ✓ should read write as 1.0

  date.test.js
    2) should read date 2:51:31 May 8, 1998
    ✓ should write date 2:51:31 May 8, 1998
    ✓ should write date 0 and read
    3) should read date 09:51:31 May 8, 1998 UTC
    4) should read date 09:51:00 May 8, 1998 UTC
    ✓ should write date
    hessian 2.0
      5) should read date 09:51:31 May 8, 1998 UTC
      6) should read Compact: date in minutes, 09:51:00 May 8, 1998 UTC
      ✓ should write and read date
      ✓ should read 1.0 format

  double.test.js
    ✓ should read double 12.25
    ✓ should write double 12.25
    ✓ should write double 100
    ✓ should write double 0
    ✓ should write as java impl
    ✓ should read java bin format
    v2.0
      ✓ should read 0.0 and 1.0
      ✓ should read 8 bits double
      ✓ should read 16 bits double
      ✓ should read 32 bits float double
      ✓ should read normal double
      ✓ should write 0.0 and 1.0
      ✓ should write as java impl
      ✓ should read java bin format
      ✓ should read java hessian 1.0 bin format

  exception.test.js
    v1.0
      ✓ should read java exception as js error
    v2.0
      ✓ should read java exception as js error
      ✓ should read hessian 1.0 exception

  int.test.js
    ✓ should read integer 300
    ✓ should write integer 300
    ✓ should write integer 0
    ✓ should write number as java write
    ✓ should read java number bin
    v2.0
      ✓ should read compact integers
      ✓ should write number as java write
      ✓ should read java number bin
      ✓ should read hessian 1.0 number bin
      ✓ should write compact integers

  list.test.js
    ✓ should read int[] = {0, 1}
    7) should write int[] = {0, 1}
    ✓ should read write anonymous variable-length list = {0, null, "foobar"}
    ✓ should write and read untyped list
    ✓ should write and read typed fixed-length list
    v2.0
      ✓ should write and read untyped list
      ✓ should write and read typed fixed-length list
      ✓ should read hessian 1.0 untyped list

  long.test.js
    ✓ should write {$class: "java.lang.Long", $: null} => null
    ✓ should read long 300
    ✓ should write long 300
    ✓ should write long 0
    ✓ should write and read equal java impl
    v2.0
      ✓ should read compact long
      ✓ should read normal long
      ✓ should write compact long
      ✓ should write and read equal java impl
      ✓ should read 1.0 bin as well

  map.test.js
    ✓ should read Serialization of a Java Object
    8) should write {hasOwnProperty: 1, a: 0, b: false, c: null} obj
    ✓ should read A sparse array
    9) should write js object to no type hash map
    ✓ should decode successful when key is null
    v2.0
      ✓ should write a java Class instance
      ✓ should read java hash map
      ✓ should read a Circular java Object
      10) should write js object to no type hash map
      ✓ should read hessian 1.0 hash map
      11) should write simple map to java hash map

  null.test.js
    ✓ should read null
    ✓ should write null
    v2.0
      ✓ should read write as 1.0

  object.test.js
    v1.0
      ✓ should write null for property like: { a: { "$class": "yyy.yyy", "$": null } }
      ✓ should write object for property like: { a: { "$class": "yyy.yyy", "$": {} } }
      ✓ should _assertType error when encode wrong object
      ✓ should decode and encode ConnectionRequest
      ✓ should write enum Color
      ✓ should write enum with ref
      ✓ should read enum Color
      ✓ should write "{$class: "hessian.test.demo.Car", $: {a: 1}}"
      ✓ should read and write one car list
      ✓ should read and write two car list
      ✓ should read and write many cars
      java.util.concurrent.atomic.AtomicLong
        ✓ should read and write
    v2.0
      ✓ should decode and encode ConnectionRequest
      ✓ should decode hessian 1.0 ConnectionRequest
      ✓ should write enum Color
      ✓ should read hessian 1.0 enum Color
      ✓ should write enum with ref
      ✓ should read enum Color
      ✓ should write "{$class: "hessian.test.demo.Car", $: {a: 1}}"
      ✓ should read one car list
      ✓ should read two car list
      ✓ should read many cars
      ✓ should read hessian 1.0 one car list
      ✓ should read hessian 1.0 two car list
      ✓ should read hessian 1.0 many cars
      java.util.concurrent.atomic.AtomicLong
        ✓ should read and write

  string.test.js
    ✓ should read string
    12) should write string
    ✓ should read write empty string
    ✓ should read and write utf8 string as java (1087ms)
    ✓ should write string same as java write (360ms)
    - should write string same as java write exclude
    v2.0
      ✓ should read short strings
      ✓ should read "hello" in long form
      ✓ should read split into two chunks: s and short strings
      ✓ should write short strings
      ✓ should read java string
      ✓ should write string same as java write (394ms)
      - should write string same as java write exclude
      ✓ should read and write utf8 string as java (1179ms)

  utils.test.js
    getSerializer()
      ✓ should [int get writeArray
      ✓ should [string get writeArray

  hessian v1
    null
      ✓ should write and read null ok
    bool
      ✓ should write and read true ok
      ✓ should write and read false ok
    int
      ✓ should write and read int ok
      ✓ should write int error
      ✓ should read int error
    long
      ✓ should write and read long ok
      ✓ should write long error
      ✓ should read long error
    double
      ✓ should write and read double ok
      ✓ should read double error
    date
      ✓ should write and read Date ok
      ✓ should read date error
    bytes
      ✓ should write and read small bytes ok
      ✓ should write and read big bytes ok (309ms)
      ✓ should read bytes error
      ✓ should bytes length equal MAX_BYTE_TRUNK_SIZE work (92ms)
      ✓ should write type error
      ✓ should write and read empty bytes
    string
      ✓ should write and read small string ok
      ✓ should write and read big string ok
      ✓ should read string error
      ✓ should write type error
      ✓ should string length equal MAX_CHAR_TRUNK_SIZE work
      ✓ should write and read empty string
    object
      13) should write and get simple object ok
      14) should write null obejct ok
      15) should write and read object with circular ok
      ✓ should write and read complex object ok
      ✓ should read complex object type use positon ok
      16) should write "java.util.HashMap" treat as {}
      17) should write type error
    array
      ✓ should write and read simple array ok
      ✓ should write circular array ok
      ✓ should write and read complex array ok
      ✓ should write "java.util.ArrayList" treat as []
      ✓ should read unexpect end label
      ✓ should write type error
    java.lang.Object
      ✓ should encode and decode ok
    encode and decode
      18) should encode and decode work ok
      ✓ should decode error


  147 passing (5s)
  2 pending
  18 failing

  1) binary.test.js
       should read and write empty binary:
     Error: Assertion has no property Buffer
      at Object.get (node_modules/should/lib/assertion.js:228:19)
      at Context.<anonymous> (test/binary.test.js:33:23)

  2) date.test.js
       should read date 2:51:31 May 8, 1998:
     Error: Assertion has no property Date
      at Object.get (node_modules/should/lib/assertion.js:228:19)
      at Context.<anonymous> (test/date.test.js:26:20)

  3) date.test.js
       should read date 09:51:31 May 8, 1998 UTC:
     Error: Assertion has no property Date
      at Object.get (node_modules/should/lib/assertion.js:228:19)
      at Context.<anonymous> (test/date.test.js:43:19)

  4) date.test.js
       should read date 09:51:00 May 8, 1998 UTC:
     Error: Assertion has no property Date
      at Object.get (node_modules/should/lib/assertion.js:228:19)
      at Context.<anonymous> (test/date.test.js:52:19)

  5) date.test.js
       hessian 2.0
         should read date 09:51:31 May 8, 1998 UTC:
     Error: Assertion has no property Date
      at Object.get (node_modules/should/lib/assertion.js:228:19)
      at Context.<anonymous> (test/date.test.js:69:21)

  6) date.test.js
       hessian 2.0
         should read Compact: date in minutes, 09:51:00 May 8, 1998 UTC:
     Error: Assertion has no property Date
      at Object.get (node_modules/should/lib/assertion.js:228:19)
      at Context.<anonymous> (test/date.test.js:78:21)

  7) list.test.js
       should write int[] = {0, 1}:
     Error: Assertion has no property Buffer
      at Object.get (node_modules/should/lib/assertion.js:228:19)
      at Context.<anonymous> (test/list.test.js:47:21)

  8) map.test.js
       should write {hasOwnProperty: 1, a: 0, b: false, c: null} obj:
     Error: Assertion has no property Buffer
      at Object.get (node_modules/should/lib/assertion.js:228:19)
      at Context.<anonymous> (test/map.test.js:96:21)

  9) map.test.js
       should write js object to no type hash map:

      AssertionError: expected [Buffer: 4e] to equal [Buffer: 4d 74 00 00 53 00 03 66 6f 6f 53 00 00 7a] (at length, A has 1 and B has 14)
      + expected - actual

       [
      -  78
      +  77
      +  116
      +  0
      +  0
      +  83
      +  0
      +  3
      +  102
      +  111
      +  111
      +  83
      +  0
      +  0
      +  122
       ]
      
      at Assertion.fail (node_modules/should/lib/assertion.js:196:17)
      at Proxy.prop.(anonymous function) (node_modules/should/lib/assertion.js:81:17)
      at Context.<anonymous> (test/map.test.js:143:16)

  10) map.test.js
       v2.0
         should write js object to no type hash map:

      AssertionError: expected [Buffer: 4e] to equal [Buffer: 4d 03 66 6f 6f 00 7a] (at length, A has 1 and B has 7)
      + expected - actual

       [
      -  78
      +  77
      +  3
      +  102
      +  111
      +  111
      +  0
      +  122
       ]
      
      at Assertion.fail (node_modules/should/lib/assertion.js:196:17)
      at Proxy.prop.(anonymous function) (node_modules/should/lib/assertion.js:81:17)
      at Context.<anonymous> (test/map.test.js:236:18)

  11) map.test.js
       v2.0
         should write simple map to java hash map:
     TypeError: Cannot read property 'should' of null
      at Context.<anonymous> (test/map.test.js:296:33)

  12) string.test.js
       should write string:
     Error: Assertion has no property Buffer
      at Object.get (node_modules/should/lib/assertion.js:228:19)
      at Context.<anonymous> (test/string.test.js:34:19)

  13) hessian v1
       object
         should write and get simple object ok:
     TypeError: hessian readObject only accept label `M` but got unexpect label `N`
      at Decoder.proto._checkLabel (lib/v1/decoder.js:72:11)
      at Decoder.proto.readObject (lib/v1/decoder.js:390:8)
      at Context.<anonymous> (test/v1.test.js:358:25)

  14) hessian v1
       object
         should write null obejct ok:
     TypeError: Cannot read property '$' of null
      at Encoder.proto.writeObject (lib/v1/encoder.js:302:30)
      at Context.<anonymous> (test/v1.test.js:363:29)

  15) hessian v1
       object
         should write and read object with circular ok:
     TypeError: hessian readObject only accept label `M` but got unexpect label `N`
      at Decoder.proto._checkLabel (lib/v1/decoder.js:72:11)
      at Decoder.proto.readObject (lib/v1/decoder.js:390:8)
      at Context.<anonymous> (test/v1.test.js:378:35)

  16) hessian v1
       object
         should write "java.util.HashMap" treat as {}:

      AssertionError: expected [Buffer: 4d 74 00 00 53 00 03 66 6f 6f 53 00 03 62 61 72 7a] to equal [Buffer: 4e] (at length, A has 17 and B has 1)
      + expected - actual

       [
      -  77
      -  116
      -  0
      -  0
      -  83
      -  0
      -  3
      -  102
      -  111
      -  111
      -  83
      -  0
      -  3
      -  98
      -  97
      -  114
      -  122
      +  78
       ]
      
      at Assertion.fail (node_modules/should/lib/assertion.js:196:17)
      at Proxy.prop.(anonymous function) (node_modules/should/lib/assertion.js:81:17)
      at Context.<anonymous> (test/v1.test.js:455:18)

  17) hessian v1
       object
         should write type error:
     AssertionError: expected [Function] to throw exception
      at Assertion.fail (node_modules/should/lib/assertion.js:196:17)
      at Proxy.prop.(anonymous function) (node_modules/should/lib/assertion.js:81:17)
      at Context.<anonymous> (test/v1.test.js:468:22)

  18) hessian v1
       encode and decode
         should encode and decode work ok:

      AssertionError: expected false == true
      + expected - actual

      -false
      +true
      
      at /Users/franktip/BugsJS/bug-dataset/Hessian.js.output/hessian.js/test/v1.test.js:617:18
      at Array.forEach (<anonymous>)
      at Context.<anonymous> (test/v1.test.js:610:13)



