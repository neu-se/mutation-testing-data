
> memfs@2.5.10 test
> jest


 RUNS  ...volume.test.ts
[K[1A[K[1A
 RUNS  ...volume.test.ts
[K[1A[K[1AFAIL src/__tests__/volume.test.ts

 RUNS  ...volume.test.ts
[K[1A[K[1A  ‚óè volume ‚Ä∫ Volume ‚Ä∫ i-nodes ‚Ä∫ i-node numbers are unique

    EISDIR: illegal operation on a directory, open '/1'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous> (src/__tests__/volume.test.ts:56:36)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .toJSON() ‚Ä∫ Single file

    EISDIR: illegal operation on a directory, open '/test'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:68:21)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .toJSON() ‚Ä∫ Multiple files

    EISDIR: illegal operation on a directory, open '/test'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:73:21)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .toJSON() ‚Ä∫ With folders, skips empty folders

    EISDIR: illegal operation on a directory, open '/test'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:84:21)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .toJSON() ‚Ä∫ Specify export path

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous> (src/__tests__/volume.test.ts:102:36)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .toJSON() ‚Ä∫ Specify multiple export paths

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous> (src/__tests__/volume.test.ts:111:36)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .toJSON() ‚Ä∫ Accumulate exports on supplied object

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous> (src/__tests__/volume.test.ts:124:36)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .fromJSON(json[, cwd]) ‚Ä∫ Files at root

    EISDIR: illegal operation on a directory, open '/hello'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Object.<anonymous> (src/__tests__/volume.test.ts:146:21)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .fromJSON(json[, cwd]) ‚Ä∫ Files at root with relative paths

    EISDIR: illegal operation on a directory, open '/hello'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Object.<anonymous> (src/__tests__/volume.test.ts:155:21)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .fromJSON(json[, cwd]) ‚Ä∫ Deeply nested tree

    EISDIR: illegal operation on a directory, open '/dir/file'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Object.<anonymous> (src/__tests__/volume.test.ts:169:21)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .reset() ‚Ä∫ Remove all files

    EISDIR: illegal operation on a directory, open '/hello'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Object.<anonymous> (src/__tests__/volume.test.ts:208:21)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .reset() ‚Ä∫ File operations should work after reset

    EISDIR: illegal operation on a directory, open '/hello'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Object.<anonymous> (src/__tests__/volume.test.ts:217:21)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .openSync(path, flags[, mode]) ‚Ä∫ Create new file at root (/test.txt)

    EISDIR: illegal operation on a directory, open '/test.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume.test.ts:228:32)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .openSync(path, flags[, mode]) ‚Ä∫ Open multiple files

    EISDIR: illegal operation on a directory, open '/1.json'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume.test.ts:268:33)
          at new Promise (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .open(path, flags[, mode], callback) ‚Ä∫ Create new file at root (/test.txt)

    expect(received).toBe(expected)
    
    Expected value to be (using ===):
      null
    Received:
      [Error: EISDIR: illegal operation on a directory, open '/test.txt']
    
    Difference:
    
      Comparing two different types of values. Expected null but received object.
      
      at src/__tests__/volume.test.ts:283:33
      at Immediate.<anonymous> (src/volume.ts:765:17)
      at processImmediate (node:internal/timers:483:21)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .open(path, flags[, mode], callback) ‚Ä∫ Properly sets permissions from mode when creating a new file

    EISDIR: illegal operation on a directory, open '/a.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:332:19)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .open(path, flags[, mode], callback) ‚Ä∫ Properly opens directory as read-only

    expect(received).toBe(expected)
    
    Expected value to be (using ===):
      null
    Received:
      [Error: EISDIR: illegal operation on a directory, open '/test-dir']
    
    Difference:
    
      Comparing two different types of values. Expected null but received object.
      
      at src/__tests__/volume.test.ts:351:33
      at Immediate.<anonymous> (src/volume.ts:765:17)
      at processImmediate (node:internal/timers:483:21)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .close(fd, callback) ‚Ä∫ Closes file without errors

    expect(received).toBe(expected)
    
    Expected value to be (using ===):
      null
    Received:
      [Error: EISDIR: illegal operation on a directory, open '/test.txt']
    
    Difference:
    
      Comparing two different types of values. Expected null but received object.
      
      at src/__tests__/volume.test.ts:361:33
      at Immediate.<anonymous> (src/volume.ts:765:17)
      at processImmediate (node:internal/timers:483:21)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .writeSync(fd, str, position, encoding) ‚Ä∫ Simple write to a file descriptor

    EISDIR: illegal operation on a directory, open '/test.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume.test.ts:428:32)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .writeSync(fd, str, position, encoding) ‚Ä∫ Multiple writes to a file

    EISDIR: illegal operation on a directory, open '/multi.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume.test.ts:436:32)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .writeSync(fd, str, position, encoding) ‚Ä∫ Overwrite part of file

    EISDIR: illegal operation on a directory, open '/overwrite.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume.test.ts:450:32)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .write(fd, buffer, offset, length, position, callback) ‚Ä∫ Simple write to a file descriptor

    EISDIR: illegal operation on a directory, open '/test.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume.test.ts:460:32)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .writeFile(path, data[, options], callback) ‚Ä∫ Create a file at root (/writeFile.json)

    expect(received).toBe(expected)
    
    Expected value to be (using ===):
      null
    Received:
      [Error: EISDIR: illegal operation on a directory, open '/writeFile.json']
    
    Difference:
    
      Comparing two different types of values. Expected null but received object.
      
      at src/__tests__/volume.test.ts:475:33
      at Immediate.<anonymous> (src/volume.ts:765:17)
      at processImmediate (node:internal/timers:483:21)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .symlinkSync(target, path[, type]) ‚Ä∫ Complex, deep, multi-step symlinks get resolved ‚Ä∫ Symlink to a folder

    EISDIR: illegal operation on a directory, open '/a1/a2/a3/a4/a5/hello.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous> (src/__tests__/volume.test.ts:506:40)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .symlinkSync(target, path[, type]) ‚Ä∫ Complex, deep, multi-step symlinks get resolved ‚Ä∫ Symlink to a folder to a folder

    EISDIR: illegal operation on a directory, open '/a1/a2/a3/a4/a5/hello.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous> (src/__tests__/volume.test.ts:511:40)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .symlinkSync(target, path[, type]) ‚Ä∫ Complex, deep, multi-step symlinks get resolved ‚Ä∫ Multiple hops to folders

    EISDIR: illegal operation on a directory, open '/a1/a2/a3/a4/a5/hello.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous> (src/__tests__/volume.test.ts:517:40)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .statSync(path) ‚Ä∫ Modification new write

    EISDIR: illegal operation on a directory, open '/mtime.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:621:21)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .linkSync(existingPath, newPath) ‚Ä∫ Create a new link

    EISDIR: illegal operation on a directory, open '/1.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:656:21)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .linkSync(existingPath, newPath) ‚Ä∫ nlink property of i-node increases when new link is created

    EISDIR: illegal operation on a directory, open '/a.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:662:21)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .readdirSync(path) ‚Ä∫ Returns simple list

    EISDIR: illegal operation on a directory, open '/1.js'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:675:21)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .readlinkSync(path[, options]) ‚Ä∫ Simple symbolic link to one file

    EISDIR: illegal operation on a directory, open '/1'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:688:21)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .readlink(path[, options], callback) ‚Ä∫ Simple symbolic link to one file

    EISDIR: illegal operation on a directory, open '/1'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:697:21)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .fsyncSync(fd) ‚Ä∫ encountered a declaration exception

    EISDIR: illegal operation on a directory, open '/lol'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Suite.<anonymous> (src/__tests__/volume.test.ts:708:28)
      at Suite.<anonymous> (src/__tests__/volume.test.ts:706:9)
      at Suite.<anonymous> (src/__tests__/volume.test.ts:26:5)
      at Object.<anonymous> (src/__tests__/volume.test.ts:5:1)
          at Generator.next (<anonymous>)
          at new Promise (<anonymous>)
          at Generator.next (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .fsync(fd, callback) ‚Ä∫ encountered a declaration exception

    EISDIR: illegal operation on a directory, open '/lol'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Suite.<anonymous> (src/__tests__/volume.test.ts:715:28)
      at Suite.<anonymous> (src/__tests__/volume.test.ts:713:9)
      at Suite.<anonymous> (src/__tests__/volume.test.ts:26:5)
      at Object.<anonymous> (src/__tests__/volume.test.ts:5:1)
          at Generator.next (<anonymous>)
          at new Promise (<anonymous>)
          at Generator.next (<anonymous>)
      at processTicksAndRejections (node:internal/process/task_queues:95:5)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .ftruncateSync(fd[, len]) ‚Ä∫ Truncates to 0 single file

    EISDIR: illegal operation on a directory, open '/trunky'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume.test.ts:723:32)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .truncateSync(path[, len]) ‚Ä∫ Truncates to 0 single file

    EISDIR: illegal operation on a directory, open '/trunky'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume.test.ts:736:32)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .truncateSync(path[, len]) ‚Ä∫ Partial truncate

    EISDIR: illegal operation on a directory, open '/1'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume.test.ts:743:32)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .utimesSync(path, atime, mtime) ‚Ä∫ Set times on file

    EISDIR: illegal operation on a directory, open '/lol'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:756:21)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .mkdtempSync(prefix[, options]) ‚Ä∫ Create temp dir at root

    EISDIR: illegal operation on a directory, open '/tmp-u9bomq/file.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:794:21)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .watchFile(path[, options], listener) ‚Ä∫ Calls listener on .writeFile

    EISDIR: illegal operation on a directory, open '/lol.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:834:21)
          at new Promise (<anonymous>)

  ‚óè volume ‚Ä∫ Volume ‚Ä∫ .unwatchFile(path[, listener]) ‚Ä∫ Stops watching before .writeFile

    EISDIR: illegal operation on a directory, open '/lol.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Object.<anonymous> (src/__tests__/volume.test.ts:848:21)
          at new Promise (<anonymous>)


 RUNS  ...volume.test.ts
[K[1A[K[1A
 RUNS  ...volume.test.ts
[K[1A[K[1A
 RUNS  ...renameSync.test.ts
[K[1A[K[1A
 RUNS  ...renameSync.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/renameSync.test.ts

 RUNS  ...renameSync.test.ts
[K[1A[K[1A  ‚óè renameSync(fromPath, toPath) ‚Ä∫ Renames a file

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/renameSync.test.ts:6:21)
          at new Promise (<anonymous>)

  ‚óè renameSync(fromPath, toPath) ‚Ä∫ Rename file two levels deep

    EISDIR: illegal operation on a directory, open '/1/2'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/renameSync.test.ts:14:21)
          at new Promise (<anonymous>)

  ‚óè renameSync(fromPath, toPath) ‚Ä∫ Rename file three levels deep

    EISDIR: illegal operation on a directory, open '/foo1'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/renameSync.test.ts:19:21)
          at new Promise (<anonymous>)

  ‚óè renameSync(fromPath, toPath) ‚Ä∫ Throws on no params

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/renameSync.test.ts:32:21)
          at new Promise (<anonymous>)

  ‚óè renameSync(fromPath, toPath) ‚Ä∫ Throws on only one param

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/renameSync.test.ts:38:21)
          at new Promise (<anonymous>)

  ‚óè renameSync(fromPath, toPath) ‚Ä∫ Throws if path is of wrong type

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/renameSync.test.ts:44:21)
          at new Promise (<anonymous>)


 RUNS  ...renameSync.test.ts
[K[1A[K[1A
 RUNS  ...readSync.test.ts
[K[1A[K[1A
 RUNS  ...readSync.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/readSync.test.ts

 RUNS  ...readSync.test.ts
[K[1A[K[1A  ‚óè .readSync(fd, buffer, offset, length, position) ‚Ä∫ Basic read file

    EISDIR: illegal operation on a directory, open '/test.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/readSync.test.ts:5:21)
          at new Promise (<anonymous>)


 RUNS  ...readSync.test.ts
[K[1A[K[1A
 RUNS  ...appendFile.test.ts
[K[1A[K[1A
 RUNS  ...appendFile.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/appendFile.test.ts

 RUNS  ...appendFile.test.ts
[K[1A[K[1A  ‚óè appendFile(file, data[, options], callback) ‚Ä∫ Simple write to non-existing file

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/appendFile.test.ts:6:21)
          at new Promise (<anonymous>)

  ‚óè appendFile(file, data[, options], callback) ‚Ä∫ Append to existing file

    EISDIR: illegal operation on a directory, open '/a'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/appendFile.test.ts:13:21)
          at new Promise (<anonymous>)


 RUNS  ...appendFile.test.ts
[K[1A[K[1A
 RUNS  ...WriteStream.test.ts
[K[1A[K[1A
 RUNS  ...WriteStream.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/WriteStream.test.ts

 RUNS  ...WriteStream.test.ts
[K[1A[K[1A  ‚óè WriteStream ‚Ä∫ fs has WriteStream constructor

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous>.exports.createFs (src/__tests__/util.ts:10:31)
      at Object.<anonymous> (src/__tests__/volume/WriteStream.test.ts:6:20)
          at new Promise (<anonymous>)

  ‚óè WriteStream ‚Ä∫ WriteStream has constructor and prototype property

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous>.exports.createFs (src/__tests__/util.ts:10:31)
      at Object.<anonymous> (src/__tests__/volume/WriteStream.test.ts:10:20)
          at new Promise (<anonymous>)

  ‚óè WriteStream ‚Ä∫ Can write basic file

    EISDIR: illegal operation on a directory, open '/a'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous>.exports.createFs (src/__tests__/util.ts:10:31)
      at Object.<anonymous> (src/__tests__/volume/WriteStream.test.ts:15:20)
          at new Promise (<anonymous>)


 RUNS  ...WriteStream.test.ts
[K[1A[K[1A
 RUNS  ...writeSync.test.ts
[K[1A[K[1A
 RUNS  ...writeSync.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/writeSync.test.ts

 RUNS  ...writeSync.test.ts
[K[1A[K[1A  ‚óè .writeSync(fd, buffer, offset, length, position) ‚Ä∫ Write binary data to file

    EISDIR: illegal operation on a directory, open '/data.bin'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume/writeSync.test.ts:13:24)
          at new Promise (<anonymous>)

  ‚óè .writeSync(fd, buffer, offset, length, position) ‚Ä∫ Write string to file

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume/writeSync.test.ts:20:24)
          at new Promise (<anonymous>)


 RUNS  ...writeSync.test.ts
[K[1A[K[1A
 RUNS  ...ReadStream.test.ts
[K[1A[K[1A
 RUNS  ...ReadStream.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/ReadStream.test.ts

 RUNS  ...ReadStream.test.ts
[K[1A[K[1A  ‚óè ReadStream ‚Ä∫ fs has ReadStream constructor

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous>.exports.createFs (src/__tests__/util.ts:10:31)
      at Object.<anonymous> (src/__tests__/volume/ReadStream.test.ts:6:20)
          at new Promise (<anonymous>)

  ‚óè ReadStream ‚Ä∫ ReadStream has constructor and prototype property

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous>.exports.createFs (src/__tests__/util.ts:10:31)
      at Object.<anonymous> (src/__tests__/volume/ReadStream.test.ts:10:20)
          at new Promise (<anonymous>)

  ‚óè ReadStream ‚Ä∫ Can read basic file

    EISDIR: illegal operation on a directory, open '/a'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous>.exports.createFs (src/__tests__/util.ts:10:31)
      at Object.<anonymous> (src/__tests__/volume/ReadStream.test.ts:15:20)
          at new Promise (<anonymous>)


 RUNS  ...ReadStream.test.ts
[K[1A[K[1A
 RUNS  ...appendFileSync.test.ts
[K[1A[K[1A
 RUNS  ...appendFileSync.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/appendFileSync.test.ts

 RUNS  ...appendFileSync.test.ts
[K[1A[K[1A  ‚óè appendFileSync(file, data, options) ‚Ä∫ Simple write to non-existing file

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/appendFileSync.test.ts:6:21)
          at new Promise (<anonymous>)

  ‚óè appendFileSync(file, data, options) ‚Ä∫ Append to existing file

    EISDIR: illegal operation on a directory, open '/a'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/appendFileSync.test.ts:11:21)
          at new Promise (<anonymous>)


 RUNS  ...appendFileSync.test.ts
[K[1A[K[1A
 RUNS  ...write.test.ts
[K[1A[K[1A
 RUNS  ...write.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/write.test.ts

 RUNS  ...write.test.ts
[K[1A[K[1A  ‚óè write(fs, str, position, encoding, callback) ‚Ä∫ Simple write to file

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at create (src/__tests__/volume/write.test.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/write.test.ts:12:21)
          at new Promise (<anonymous>)


 RUNS  ...write.test.ts
[K[1A[K[1A
 RUNS  ...closeSync.test.ts
[K[1A[K[1A
 RUNS  ...closeSync.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/closeSync.test.ts

 RUNS  ...closeSync.test.ts
[K[1A[K[1A  ‚óè .closeSync(fd) ‚Ä∫ Closes file without errors

    EISDIR: illegal operation on a directory, open '/test.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume/closeSync.test.ts:6:24)
          at new Promise (<anonymous>)

  ‚óè .closeSync(fd) ‚Ä∫ Correct error when file descriptor is not a number

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous> (src/__tests__/volume/closeSync.test.ts:10:28)
          at new Promise (<anonymous>)

  ‚óè .closeSync(fd) ‚Ä∫ Closing same file descriptor twice throws EBADF

    EISDIR: illegal operation on a directory, open '/test.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume/closeSync.test.ts:29:24)
          at new Promise (<anonymous>)

  ‚óè .closeSync(fd) ‚Ä∫ Closing a file decreases the number of open files

    EISDIR: illegal operation on a directory, open '/test.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume/closeSync.test.ts:39:24)
          at new Promise (<anonymous>)

  ‚óè .closeSync(fd) ‚Ä∫ When closing a file, its descriptor is added to the pool of descriptors to be reused

    EISDIR: illegal operation on a directory, open '/test.txt'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume/closeSync.test.ts:45:24)
          at new Promise (<anonymous>)


 RUNS  ...closeSync.test.ts
[K[1A[K[1A
 RUNS  ...existsSync.test.ts
[K[1A[K[1A
 RUNS  ...existsSync.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/existsSync.test.ts

 RUNS  ...existsSync.test.ts
[K[1A[K[1A  ‚óè existsSync(path) ‚Ä∫ encountered a declaration exception

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Suite.<anonymous> (src/__tests__/volume/existsSync.test.ts:5:17)
      at Object.<anonymous> (src/__tests__/volume/existsSync.test.ts:4:1)
          at Generator.next (<anonymous>)
          at new Promise (<anonymous>)
          at Generator.next (<anonymous>)


 RUNS  ...existsSync.test.ts
[K[1A[K[1A
 RUNS  ...openSync.test.ts
[K[1A[K[1A
 RUNS  ...openSync.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/openSync.test.ts

 RUNS  ...openSync.test.ts
[K[1A[K[1A  ‚óè openSync(path, mode[, flags]) ‚Ä∫ should return a file descriptor

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.openSync (src/volume.ts:899:21)
      at Object.<anonymous> (src/__tests__/volume/openSync.test.ts:6:23)
          at new Promise (<anonymous>)


 RUNS  ...openSync.test.ts
[K[1A[K[1A
 RUNS  ...index.test.ts
[K[1A[K[1APASS src/__tests__/index.test.ts

 RUNS  ...index.test.ts
[K[1A[K[1A
 RUNS  ...exists.test.ts
[K[1A[K[1A
 RUNS  ...exists.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/exists.test.ts

 RUNS  ...exists.test.ts
[K[1A[K[1A  ‚óè exists(path, callback) ‚Ä∫ encountered a declaration exception

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Suite.<anonymous> (src/__tests__/volume/exists.test.ts:5:17)
      at Object.<anonymous> (src/__tests__/volume/exists.test.ts:4:1)
          at Generator.next (<anonymous>)
          at new Promise (<anonymous>)
          at Generator.next (<anonymous>)


 RUNS  ...exists.test.ts
[K[1A[K[1A
 RUNS  ...writeFileSync.test.ts
[K[1A[K[1A
 RUNS  ...writeFileSync.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/writeFileSync.test.ts

 RUNS  ...writeFileSync.test.ts
[K[1A[K[1A  ‚óè writeFileSync(path, data[, options]) ‚Ä∫ Create a file at root (/writeFileSync.txt)

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/writeFileSync.test.ts:8:21)
          at new Promise (<anonymous>)

  ‚óè writeFileSync(path, data[, options]) ‚Ä∫ Write to file by file descriptor

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/writeFileSync.test.ts:16:21)
          at new Promise (<anonymous>)

  ‚óè writeFileSync(path, data[, options]) ‚Ä∫ Write to two files (second by fd)

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/writeFileSync.test.ts:24:21)
          at new Promise (<anonymous>)

  ‚óè writeFileSync(path, data[, options]) ‚Ä∫ Write at relative path that does not exist throws correct error

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/writeFileSync.test.ts:40:21)
          at new Promise (<anonymous>)


 RUNS  ...writeFileSync.test.ts
[K[1A[K[1A
 RUNS  ...rename.test.ts
[K[1A[K[1A
 RUNS  ...rename.test.ts
[K[1A[K[1AFAIL src/__tests__/volume/rename.test.ts

 RUNS  ...rename.test.ts
[K[1A[K[1A  ‚óè renameSync(fromPath, toPath) ‚Ä∫ Renames a simple case

    EISDIR: illegal operation on a directory, open '/foo'
      
      at createError (src/volume.ts:128:19)
      at throwError (src/volume.ts:134:11)
      at Volume.openLink (src/volume.ts:723:9)
      at Volume.openFile (src/volume.ts:885:25)
      at Volume.openBase (src/volume.ts:889:27)
      at Volume.writeFileBase (src/volume.ts:1143:23)
      at Volume.writeFileSync (src/volume.ts:1167:14)
      at Volume.fromJSON (src/volume.ts:815:18)
      at Function.Volume.fromJSON (src/volume.ts:493:13)
      at Object.<anonymous>.exports.create (src/__tests__/util.ts:5:24)
      at Object.<anonymous> (src/__tests__/volume/rename.test.ts:6:21)
          at new Promise (<anonymous>)


 RUNS  ...rename.test.ts
[K[1A[K[1A
 RUNS  ...node.test.ts
[K[1A[K[1APASS src/__tests__/node.test.ts

 RUNS  ...node.test.ts
[K[1A[K[1A
 RUNS  ...setImmediate.test.ts
[K[1A[K[1APASS src/__tests__/setImmediate.test.ts

 RUNS  ...setImmediate.test.ts
[K[1A[K[1A
 RUNS  ...setTimeoutUnref.test.ts
[K[1A[K[1APASS src/__tests__/setTimeoutUnref.test.ts

 RUNS  ...setTimeoutUnref.test.ts
[K[1A[K[1A
 RUNS  ...process.test.ts
[K[1A[K[1APASS src/__tests__/process.test.ts

 RUNS  ...process.test.ts
[K[1A[K[1A
Test Suites: 15 failed, 5 passed, 20 total
Tests:       74 failed, 19 skipped, 68 passed, 161 total
Snapshots:   0 total
Time:        5.657s
Ran all test suites.
